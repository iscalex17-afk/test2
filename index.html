<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rivo — Skill-to-Earn Micro-Courses</title>
  <meta name="description" content="Micro-cursuri, prompts & AI workflows. Cumpără cursuri, urmărește progresul și obține certificate digitale.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- ==== STYLES (ONE FILE) ==== -->
  <style>
    :root{
      --bg:#07080d; --panel:#0f1424; --edge:#1a2140; --text:#eef2ff; --muted:#b7c1e1;
      --accent:#8b5cf6; --accent2:#22d3ee; --gold:#f5d46b; --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:radial-gradient(100% 100% at 0% 0%, rgba(139,92,246,.18), transparent 50%),
                 radial-gradient(100% 100% at 100% 0%, rgba(34,211,238,.14), transparent 55%), var(--bg);
      color:var(--text)}
    img{max-width:100%; display:block}
    a{text-decoration:none; color:inherit}
    .container{width:100%; max-width:1180px; margin:0 auto; padding:0 20px}
    header.nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px);
      border-bottom:1px solid var(--edge); background:linear-gradient(180deg, rgba(11,15,25,.75), rgba(11,15,25,.55))}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:14px 0}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800}
    .brand .dot{width:8px; height:8px; border-radius:999px;
      background:radial-gradient(circle at 40% 40%, var(--accent2), var(--accent)); box-shadow:0 0 14px var(--accent2)}
    .nav-links{display:flex; gap:14px; flex-wrap:wrap}
    .nav-links a{padding:9px 12px; border-radius:10px}
    .nav-links a:hover{background:rgba(124,92,255,.12); box-shadow:0 0 20px rgba(124,92,255,.25) inset}
    .btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 16px;
      border-radius:12px; border:1px solid var(--edge); font-weight:700; background:rgba(255,255,255,.03); color:var(--text); cursor:pointer}
    .btn.primary{background:radial-gradient(120% 120% at 0% 0%, rgba(124,92,255,.35), transparent 50%),
                               radial-gradient(120% 120% at 100% 0%, rgba(34,211,238,.28), transparent 50%), var(--panel); border:0}
    .btn.primary:hover{transform:translateY(-1px); box-shadow:0 0 24px rgba(124,92,255,.35), 0 0 28px rgba(34,211,238,.25)}
    .btn.ghost{background:rgba(124,92,255,.10)}
    .section{padding:70px 0}
    .grid{display:grid; gap:16px}
    .two{grid-template-columns:repeat(1,1fr)}
    .three{grid-template-columns:repeat(1,1fr)}
    @media (min-width:900px){ .two{grid-template-columns:repeat(2,1fr)} .three{grid-template-columns:repeat(3,1fr)} }
    .card{background:linear-gradient(180deg, rgba(15,20,36,.92), rgba(11,15,25,.92)); border:1px solid var(--edge); border-radius:var(--radius); padding:18px}
    .hero{padding:96px 0 54px; text-align:center}
    .hero h1{font-size:clamp(36px,5vw,68px); margin:0 0 12px;
      background:linear-gradient(135deg,#fff,#a5b4fc 35%,#7c5cff 60%,#22d3ee 95%); -webkit-background-clip:text; background-clip:text; color:transparent}
    .hero .lead{color:var(--muted)}
    .badge{display:inline-flex; gap:8px; padding:6px 10px; border:1px solid var(--edge); border-radius:999px; font-weight:700; font-size:12px; background:rgba(6,182,212,.08)}
    .money{font-size:28px; font-weight:800; background:linear-gradient(135deg,#fff,#a5b4fc 40%, #7c5cff 70%); -webkit-background-clip:text; background-clip:text; color:transparent}
    .muted{color:var(--muted)}
    .list{line-height:1.8}
    footer{border-top:1px solid var(--edge); padding:26px 0; color:var(--muted); font-size:14px; text-align:center}
    /* Accordion/Progress */
    details{border:1px solid var(--edge); border-radius:12px; padding:10px; background:#0b1020}
    summary{cursor:pointer; list-style:none}
    .progress{height:10px; background:#101731; border-radius:999px; overflow:hidden}
    .progress>div{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent2)); transition:width .3s ease}
    /* Modal (certificate) */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1000; background:rgba(3,6,14,.6); backdrop-filter:blur(6px)}
    .modal.open{display:flex}
    .modal-card{ width:min(560px, 92vw); background:linear-gradient(180deg, rgba(15,20,36,.96), rgba(11,15,25,.96)); border:1px solid var(--edge); border-radius:16px; padding:20px}
    /* Print sheet */
    .sheet{max-width:900px; margin:0 auto; padding:40px; background:#0b1020; border:2px solid #2a3470; border-radius:18px; box-shadow:0 20px 60px rgba(0,0,0,.45)}
    .seal{width:90px; height:90px; border-radius:999px; background:radial-gradient(circle at 40% 40%, var(--gold), #b38b2e); box-shadow:0 0 30px rgba(245,212,107,.35); margin:0 auto}
    /* Simple router sections */
    [data-view]{display:none}
    [data-view].active{display:block}
    /* Tiny utility */
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  </style>
</head>
<body>

  <!-- ==== NAV ==== -->
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#/"><span class="dot"></span><span>Rivo</span></a>
      <nav class="nav-links">
        <a href="#/catalog">Cursuri</a>
        <a href="#/how">Cum funcționează</a>
        <a href="#/pricing">Prețuri</a>
        <a href="#/faq">FAQ</a>
      </nav>
      <div class="row">
        <button class="btn" id="loginBtn">Log in</button>
        <a class="btn primary" href="#/dashboard">Dashboard</a>
      </div>
    </div>
  </header>

  <!-- ==== VIEWS (ONE FILE SPA) ==== -->
  <main class="container">

    <!-- Landing -->
    <section class="hero" data-view="home">
      <span class="badge">Prompts → AI Workflows • Skill-to-Earn</span>
      <h1>Învață rapid. Aplică imediat. <br/>Obține badge-uri.</h1>
      <p class="lead">Micro-cursuri cu conținut practic, plăți Stripe (Payment Links), progres, certificate și gamificare.</p>
      <div class="row" style="justify-content:center; margin-top:12px">
        <a class="btn primary" href="#/catalog">Vezi cursuri</a>
        <a class="btn" href="#/how">Cum funcționează</a>
      </div>

      <div class="section">
        <h2>Cursuri populare</h2>
        <div id="homeCatalog" class="grid three"></div>
      </div>
    </section>

    <!-- Catalog -->
    <section class="section" data-view="catalog">
      <h2>Catalog cursuri</h2>
      <div id="catalogList" class="grid three"></div>
    </section>

    <!-- Course -->
    <section class="section" data-view="course" id="courseWrap">
      <div class="grid two">
        <div>
          <img id="cThumb" alt="thumb" style="border-radius:12px; border:1px solid #141a34; margin-bottom:10px"/>
          <h1 id="cTitle">Titlu curs</h1>
          <p class="muted" id="cMeta"></p>
          <p id="cSummary" class="muted"></p>
          <div id="buyActions" style="margin:10px 0"></div>
        </div>
        <div class="card">
          <h3>Curriculum</h3>
          <div id="curriculum"></div>
          <p class="muted" style="margin-top:8px">Bifează lecțiile pe măsură ce le finalizezi.</p>
        </div>
      </div>
    </section>

    <!-- How it works -->
    <section class="section" data-view="how">
      <h2>Cum funcționează Rivo</h2>
      <div class="grid two">
        <article class="card"><h3>1) Alege un micro-curs</h3><p class="muted">Prompts, workflows, no-code.</p></article>
        <article class="card"><h3>2) Cumpără sigur</h3><p class="muted">Stripe Payment Link → redirect înapoi la Rivo.</p></article>
        <article class="card"><h3>3) Parcurge & bifează</h3><p class="muted">Progres pe lecții, quiz-ready.</p></article>
        <article class="card"><h3>4) Badge & Certificat</h3><p class="muted">Generezi cert PDF și îl poți share-ui.</p></article>
      </div>
    </section>

    <!-- Pricing -->
    <section class="section" data-view="pricing">
      <h2>Planuri</h2>
      <div class="grid three">
        <article class="card"><h3>Free</h3><p class="money">€0</p><p class="muted">Lecții demo & newsletter</p></article>
        <article class="card"><h3>Pro</h3><p class="money">€29/lună</p><p class="muted">Acces la toate cursurile</p></article>
        <article class="card"><h3>Enterprise</h3><p class="money">Contact</p><p class="muted">SSO, SLA, suport dedicat</p></article>
      </div>
    </section>

    <!-- FAQ + Contact (Netlify Forms) -->
    <section class="section" data-view="faq">
      <h2>FAQ</h2>
      <details class="card"><summary><strong>Ce primesc după plată?</strong></summary><p class="muted">Acces instant la curs + progres salvat + certificat la final.</p></details>
      <details class="card"><summary><strong>Pot descărca materialele?</strong></summary><p class="muted">PDF-urile pot fi descărcate; videourile se redau online.</p></details>
      <details class="card"><summary><strong>Certificatele sunt acreditate?</strong></summary><p class="muted">Sunt certificate de completare / micro-badge-uri (nu acreditare oficială).</p></details>

      <form name="contact" method="POST" data-netlify="true" class="card" style="margin-top:14px">
        <input type="hidden" name="form-name" value="contact" />
        <h3>Întrebări? Scrie-ne</h3>
        <div class="grid two">
          <label>Nume <input name="name" required/></label>
          <label>Email <input type="email" name="email" required/></label>
        </div>
        <label>Mesaj <textarea name="message" rows="4" required></textarea></label>
        <button class="btn primary" type="submit">Trimite</button>
      </form>
    </section>

    <!-- Dashboard -->
    <section class="section" data-view="dashboard">
      <h1>Bun venit, <span id="userName">Cursant</span> 👋</h1>
      <div id="successMsg" class="muted" style="margin:8px 0 18px"></div>
      <h2>Cursurile mele</h2>
      <div id="myCourses" class="grid two"></div>
    </section>

    <!-- Certificate (Modal print) -->
    <div class="modal" id="certModal" aria-modal="true" role="dialog">
      <div class="modal-card">
        <div class="sheet">
          <div class="seal"></div>
          <h1 style="text-align:center; margin:12px 0">Certificat de finalizare</h1>
          <p class="muted" style="text-align:center">Se acordă lui</p>
          <h2 id="certName" style="text-align:center; margin:6px 0">Nume Cursant</h2>
          <p class="muted" style="text-align:center">pentru finalizarea cursului</p>
          <h3 id="certCourse" style="text-align:center; margin:6px 0">Titlu curs</h3>
          <p class="muted" style="text-align:center">Data: <span id="certDate"></span></p>
          <div style="text-align:center; margin-top:18px" class="row">
            <button class="btn primary" id="printBtn">Descarcă PDF</button>
            <button class="btn" id="closeCert">Închide</button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer class="container">
    <div class="row" style="justify-content:center">
      <a href="#">Termeni</a> • <a href="#">Confidențialitate</a> • <a href="#/dashboard">Contul meu</a>
    </div>
    <p style="margin:8px 0 0">© <span id="year"></span> Rivo</p>
  </footer>

  <!-- ==== COURSES DATA (embedded JSON) ==== -->
  <script type="application/json" id="courses">
  [
    {
      "id": "ai-prompts-20",
      "title": "Pachet 20 Prompts – Content, Image, Analysis",
      "level": "Începător",
      "duration": "1.5h",
      "price": 15,
      "payment_link": "REPLACE_WITH_STRIPE_PAYMENT_LINK_ai_prompts_20",
      "thumb": "https://images.unsplash.com/photo-1534759846116-57968a434a49?q=80&w=1200&auto=format&fit=crop",
      "summary": "20 de prompt-uri testate pentru copy, imagini și analiză – gata de folosit.",
      "modules": [
        {"title":"Introducere & bune practici","lessons":["Ce este un prompt bun","Structură & ton","Evitarea halucinațiilor"]},
        {"title":"Content prompts","lessons":["Email outreach","Postări social media","Rezumat + acțiuni"]},
        {"title":"Image prompts","lessons":["Stiluri & compoziție","Variații & seed-uri"]},
        {"title":"Analysis prompts","lessons":["Sentiment","Clasificare etichete","Topic mining"]}
      ]
    },
    {
      "id": "wf-templates-60",
      "title": "Workflow Templates – 60 No-Code Automations",
      "level": "Intermediar",
      "duration": "3h",
      "price": 59,
      "payment_link": "REPLACE_WITH_STRIPE_PAYMENT_LINK_wf_templates_60",
      "thumb": "https://images.unsplash.com/photo-1551281044-8d8d2aa1a24d?q=80&w=1200&auto=format&fit=crop",
      "summary": "60 șabloane no-code pentru automatizări AI: CRM, email, analytics, imagini.",
      "modules": [
        {"title":"Setup & conectori","lessons":["Chei API","Trigger & actions","Rate limiting"]},
        {"title":"Marketing automations","lessons":["Rescriere landing","Drip emails","Lead scoring AI"]}
      ]
    },
    {
      "id": "prompt-pro-100",
      "title": "Prompt Pack PRO – 100 pentru echipe",
      "level": "Avansat",
      "duration": "5h",
      "price": 39,
      "payment_link": "REPLACE_WITH_STRIPE_PAYMENT_LINK_prompt_pro_100",
      "thumb": "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop",
      "summary": "Colecție extinsă pentru freelanceri & echipe: content, code, vizual, date.",
      "modules": [
        {"title":"Arhitectură prompts","lessons":["Chain-of-thought","Self-critique","Tools & function calling"]}
      ]
    }
  ]
  </script>

  <!-- ==== APP SCRIPT (ONE FILE) ==== -->
  <script>
    // Helpers
    const $ = (s, c=document)=>c.querySelector(s);
    const $$ = (s, c=document)=>Array.from(c.querySelectorAll(s));
    const money = n => `€${(+n).toFixed(0)}`;
    const COURSES = JSON.parse($('#courses').textContent);

    // Fake Auth (email-only) — replace with Auth0/Supabase later
    const Auth = {
      user(){ try{return JSON.parse(localStorage.getItem('rivo_user')||'null')}catch{return null} },
      login(email){ const u={ email, name: email.split('@')[0] }; localStorage.setItem('rivo_user', JSON.stringify(u)); return u; },
      logout(){ localStorage.removeItem('rivo_user'); }
    };

    // Purchases (client-side). With Stripe Payment Links, set success redirect to yoursite/#/dashboard?success=1&course=<id>
    const Purchases = {
      all(){ try{return JSON.parse(localStorage.getItem('rivo_purchases')||'[]')}catch{return []} },
      add(id){ const a=this.all(); if(!a.includes(id)){ a.push(id); localStorage.setItem('rivo_purchases', JSON.stringify(a)); } },
      has(id){ return this.all().includes(id); }
    };

    // Progress per course
    const Progress = {
      get(id){ try{return JSON.parse(localStorage.getItem('rivo_prog_'+id)||'{}')}catch{return {}} },
      set(id,obj){ localStorage.setItem('rivo_prog_'+id, JSON.stringify(obj)); },
      mark(id,key){ const p=this.get(id); p[key]=true; this.set(id,p); }
    };

    // Router (hash-based)
    const views = $$('[data-view]');
    function route(){
      const h = location.hash || '#/';
      const url = new URL(location.href);
      const params = new URLSearchParams(url.hash.split('?')[1]||'');
      views.forEach(v=>v.classList.remove('active'));

      if(h.startsWith('#/catalog')){ $('[data-view="catalog"]').classList.add('active'); renderCatalog(COURSES, $('#catalogList')); }
      else if(h.startsWith('#/course')){
        $('[data-view="course"]').classList.add('active');
        const id = params.get('id'); if(!id) return;
        renderCourse(id);
      }
      else if(h.startsWith('#/how')){ $('[data-view="how"]').classList.add('active'); }
      else if(h.startsWith('#/pricing')){ $('[data-view="pricing"]').classList.add('active'); }
      else if(h.startsWith('#/faq')){ $('[data-view="faq"]').classList.add('active'); }
      else if(h.startsWith('#/dashboard')){ $('[data-view="dashboard"]').classList.add('active'); renderDashboard(); }
      else { // home
        $('[data-view="home"]').classList.add('active');
        renderCatalog(COURSES.slice(0,3), $('#homeCatalog'));
      }

      // Handle Stripe Payment Link success (?success=1&course=ID) on any route
      const qs = new URLSearchParams(location.search);
      if(qs.get('success')==='1' && qs.get('course')){
        Purchases.add(qs.get('course'));
        history.replaceState({}, '', location.pathname + location.hash); // clean query
      }
    }
    window.addEventListener('hashchange', route);

    // Catalog renderer
    function renderCatalog(list, mount){
      mount.innerHTML = list.map(c=>`
        <article class="card">
          <img alt="${c.title}" src="${c.thumb}" style="border-radius:12px; border:1px solid #141a34; margin-bottom:10px"/>
          <h3>${c.title}</h3>
          <p class="muted">${c.summary}</p>
          <div class="row" style="justify-content:space-between; margin-top:8px">
            <span class="money">${money(c.price)}</span>
            <div class="row">
              <a class="btn ghost" href="#/course?id=${c.id}">Detalii</a>
              <button class="btn primary" data-buy="${c.id}">Cumpără</button>
            </div>
          </div>
        </article>
      `).join('');
      mount.querySelectorAll('[data-buy]').forEach(b=> b.addEventListener('click', ()=> buy(b.dataset.buy)));
    }

    // Start Payment Link (or demo add)
    function buy(courseId){
      const user = Auth.user() || Auth.login(prompt('Introdu email pentru a continua:')||'');
      if(!user || !user.email) return;
      const c = COURSES.find(x=>x.id===courseId);
      if(!c) return alert('Curs indisponibil.');
      if(c.payment_link && !c.payment_link.startsWith('REPLACE_WITH_')){
        // IMPORTANT: set in Stripe Payment Link -> Post-payment redirect: https://<yoursite>/#/dashboard?success=1&course=<courseId>
        window.location.href = c.payment_link;
      } else {
        // Demo fallback (no Stripe): grant access locally
        Purchases.add(courseId);
        alert('Demo: achiziție marcată local. Acces în Dashboard.');
        location.hash = '#/dashboard';
      }
    }

    // Course page
    function renderCourse(id){
      const c = COURSES.find(x=>x.id===id);
      if(!c){ $('#courseWrap').innerHTML = '<p>Curs indisponibil.</p>'; return; }
      $('#cThumb').src = c.thumb;
      $('#cTitle').textContent = c.title;
      $('#cMeta').textContent = `${c.level} • ${c.duration}`;
      $('#cSummary').textContent = c.summary;
      const owned = Purchases.has(c.id);
      $('#buyActions').innerHTML = owned
        ? `<span class="badge">Deținut</span> <button class="btn" id="openCert">Descarcă Certificat</button>`
        : `<button class="btn primary" id="buyNow">Cumpără (${money(c.price)})</button>`;
      $('#buyNow')?.addEventListener('click', ()=> buy(c.id));
      $('#openCert')?.addEventListener('click', ()=> openCertificate(c.title));

      const prog = Progress.get(c.id);
      $('#curriculum').innerHTML = c.modules.map((m,mi)=>`
        <details ${mi===0?'open':''}><summary><strong>${m.title}</strong></summary>
        <ol class="list">
          ${m.lessons.map((l,li)=>{
            const key = `${mi}_${li}`, checked = !!prog[key], lock = owned? '' : ' (🔒)';
            return `<li style="display:flex; align-items:center; gap:8px; margin:8px 0">
              <input type="checkbox" ${checked?'checked':''} data-lesson="${key}" ${owned?'':'disabled'} />
              <span>${l}${lock}</span>
            </li>`;
          }).join('')}
        </ol>
        </details>
      `).join('');

      $('#curriculum').addEventListener('change', e=>{
        const el = e.target.closest('[data-lesson]'); if(!el) return;
        Progress.mark(c.id, el.getAttribute('data-lesson'));
      });
    }

    // Dashboard
    function renderDashboard(){
      const u = Auth.user(); if(!u){ const em=prompt('Email pentru logare:'); if(!em) return; Auth.login(em); }
      $('#userName').textContent = (Auth.user()?.name)||'Cursant';
      const mine = COURSES.filter(c=> Purchases.has(c.id));
      const wrap = $('#myCourses');
      if(mine.length===0){ wrap.innerHTML = '<p class="muted">Nu ai cursuri încă. Explorează <a href="#/catalog" style="text-decoration:underline">catalogul</a>.</p>'; return; }
      wrap.innerHTML = mine.map(c=>{
        const prog = Progress.get(c.id);
        const total = c.modules.reduce((s,m)=> s+m.lessons.length,0);
        const done = Object.keys(prog).length;
        const pct = Math.min(100, Math.round(done/total*100)) || 0;
        return `<article class="card">
          <div class="row" style="align-items:flex-start">
            <img src="${c.thumb}" alt="${c.title}" style="width:120px; height:80px; object-fit:cover; border-radius:10px; border:1px solid #141a34"/>
            <div style="flex:1">
              <h3 style="margin:4px 0 6px">${c.title}</h3>
              <div class="progress"><div style="width:${pct}%"></div></div>
              <div class="muted" style="margin-top:6px">Progres: ${pct}%</div>
              <div class="row" style="margin-top:10px">
                <a class="btn primary" href="#/course?id=${c.id}">Continuă</a>
                ${pct===100? `<button class="btn" onclick="openCertificate('${c.title.replace(/'/g,"\\'")}')">Certificat</button>`:''}
              </div>
            </div>
          </div>
        </article>`;
      }).join('');
      // Success msg (if came from Payment Link redirect cleaned by router)
      const qs = new URLSearchParams(location.search);
      if(qs.get('success')==='1' && qs.get('course')){
        $('#successMsg').textContent = 'Plată reușită! Accesul a fost activat.';
      } else {
        $('#successMsg').textContent = '';
      }
    }

    // Certificate modal
    function openCertificate(courseTitle){
      const user = Auth.user() || {name:'Cursant'};
      $('#certName').textContent = user.name;
      $('#certCourse').textContent = courseTitle || 'Curs';
      $('#certDate').textContent = new Date().toLocaleDateString();
      $('#certModal').classList.add('open');
    }
    $('#closeCert').addEventListener('click', ()=> $('#certModal').classList.remove('open'));
    $('#printBtn').addEventListener('click', ()=> window.print());

    // Login/Logout
    $('#loginBtn').addEventListener('click', ()=>{
      const email = prompt('Email pentru logare:'); if(!email) return;
      Auth.login(email); route();
    });

    // Footer year
    $('#year').textContent = new Date().getFullYear();

    // Init route & home catalog
    route(); // first load
  </script>

  <!-- Netlify forms bot field (optional anti-spam) -->
  <form name="contact" data-netlify="true" netlify-honeypot="bot-field" hidden>
    <input type="hidden" name="form-name" value="contact" />
    <input name="bot-field"/>
  </form>
</body>
</html>
