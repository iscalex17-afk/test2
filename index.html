<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rivo â€” Skill-to-Earn â€¢ Prompts & AI Workflows</title>
<meta name="description" content="Rivo: micro-cursuri, prompts & AI workflows. Catalog, cos, checkout (Stripe Links), progres, XP, certificate. Dark neon/glow.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%239467F5'/%3E%3Cstop offset='1' stop-color='%2300D1FF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='36' height='36' rx='8' fill='%23090B10'/%3E%3Cpath d='M10 24l8-12 8 12' stroke='url(%23g)' stroke-width='3' stroke-linecap='round' fill='none'/%3E%3C/svg%3E" type="image/svg+xml">
<style>
:root{
  --bg:#07080d; --bg2:#0b0f19; --card:#0f1424; --edge:#1a2140; --text:#eef2ff; --muted:#b7c1e1;
  --vio:#7c5cff; --cy:#22d3ee; --gold:#f5d46b; --accent:#8b5cf6; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.02)
}
*{box-sizing:border-box} html,body{height:100%} html{scroll-behavior:smooth}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);
  background:radial-gradient(120% 120% at 10% -10%, rgba(139,92,246,.18), transparent 50%),
             radial-gradient(120% 120% at 110% 10%, rgba(34,211,238,.14), transparent 50%), var(--bg); overflow-x:hidden}
a{color:inherit;text-decoration:none} img{max-width:100%;display:block}
.container{max-width:1180px;margin:0 auto;padding:0 20px}
.grid{display:grid;gap:16px} .two{grid-template-columns:repeat(1,1fr)} .three{grid-template-columns:repeat(1,1fr)}
@media(min-width:900px){.two{grid-template-columns:repeat(2,1fr)} .three{grid-template-columns:repeat(3,1fr)}}

header.nav{position:sticky;top:0;z-index:60;border-bottom:1px solid var(--edge);
  backdrop-filter:saturate(140%) blur(10px);
  background:linear-gradient(180deg, rgba(11,15,25,.75), rgba(11,15,25,.55))}
.nav-inner{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.brand .dot{width:10px;height:10px;border-radius:999px;background:radial-gradient(circle at 40% 40%, var(--cy), var(--vio));box-shadow:0 0 14px var(--cy)}
.nav-links{display:flex;gap:12px;flex-wrap:wrap}
.nav-links a{padding:8px 10px;border-radius:10px;opacity:.92}
.nav-links a:hover{background:rgba(124,92,255,.12);box-shadow:0 0 20px rgba(124,92,255,.35) inset;opacity:1}
.kit{display:flex;align-items:center;gap:8px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:10px 16px;border-radius:12px;border:1px solid var(--edge);box-shadow:var(--shadow);font-weight:700;cursor:pointer;transition:transform .15s, box-shadow .2s, background .2s}
.btn.small{padding:7px 12px;font-size:14px}
.btn.primary{background:
  radial-gradient(120% 120% at 0% 0%, rgba(124,92,255,.35), transparent 50%),
  radial-gradient(120% 120% at 100% 0%, rgba(34,211,238,.28), transparent 50%), var(--bg2); border-color:transparent}
.btn.primary:hover{transform:translateY(-1px) scale(1.01); box-shadow:0 0 24px rgba(124,92,255,.45), 0 0 28px rgba(34,211,238,.35)}
.btn.ghost{background:rgba(124,92,255,.10)}
.badge{display:inline-flex;gap:8px;padding:6px 10px;border:1px solid var(--edge);border-radius:999px;font-weight:700;font-size:12px;background:rgba(6,182,212,.08)}
.money{font-weight:800;background:linear-gradient(135deg,#fff,#a5b4fc 40%, #7c5cff 70%);-webkit-background-clip:text;background-clip:text;color:transparent}
.muted{color:var(--muted)}
.section{padding:70px 0;opacity:0;transform:translateY(24px);transition:opacity .6s, transform .6s}
.section.is-visible{opacity:1;transform:translateY(0)}
.card{background:linear-gradient(180deg, rgba(15,20,36,.92), rgba(11,15,25,.92));border:1px solid var(--edge);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
.hero{padding:96px 0 54px;text-align:center}
h1{font-size:clamp(36px,5vw,68px);margin:0 0 12px}
.glow{background:linear-gradient(135deg,#fff,#a5b4fc 35%,#7c5cff 60%,#22d3ee 95%);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 30px rgba(124,92,255,.25)}
.lead{font-size:clamp(16px,2vw,20px)}
.kbd{display:inline-block;padding:6px 10px;border-radius:8px;border:1px solid var(--edge);background:rgba(255,255,255,.03);font-family:ui-monospace,Consolas,monospace;font-size:12px}
.frame{border-radius:14px;border:1px solid var(--edge);padding:8px;background:linear-gradient(180deg,#0d1224,#0a0f20);box-shadow:0 1px 0 rgba(255,255,255,.03) inset,0 0 0 1px rgba(124,92,255,.12),0 12px 32px rgba(0,0,0,.45)}
.frame img{border-radius:10px;border:1px solid #141a34}
.progress{height:10px;background:#101731;border-radius:999px;overflow:hidden}
.progress>div{height:100%;width:0;background:linear-gradient(90deg,var(--vio),var(--cy));transition:width .3s}
details{border:1px solid var(--edge);border-radius:12px;padding:10px;background:#0b1020}
summary{cursor:pointer;list-style:none}
/* Cart bubble + Drawer */
.cart-btn{position:relative}
.cart-badge{position:absolute;right:-6px;top:-6px;min-width:18px;height:18px;padding:0 5px;border-radius:999px;background:radial-gradient(circle at 40% 40%, var(--gold), #b38b2e);color:#1a1400;font-weight:800;font-size:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 0 16px rgba(245,212,107,.4)}
.drawer{position:fixed;inset:0;z-index:1000;display:none}
.drawer.open{display:block}
.drawer .overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(4px)}
.panel{position:absolute;right:0;top:0;height:100%;width:min(520px,92vw);background:linear-gradient(180deg, rgba(15,20,36,.98), rgba(11,15,25,.98));border-left:1px solid var(--edge);box-shadow: -20px 0 60px rgba(0,0,0,.5);display:flex;flex-direction:column}
.panel header{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--edge)}
.panel .body{padding:16px;overflow:auto;flex:1}
.item{display:grid;grid-template-columns:72px 1fr auto;gap:12px;align-items:center;border:1px solid var(--edge);border-radius:12px;padding:10px;background:#0b1020}
.qty{display:flex;align-items:center;gap:8px}
.qty button{width:28px;height:28px;border-radius:8px;border:1px solid var(--edge);background:#0f1834;color:var(--text);cursor:pointer}
.total{display:flex;align-items:center;justify-content:space-between;border-top:1px solid var(--edge);padding-top:12px;margin-top:12px}
hr.line{border:none;border-top:1px solid var(--edge);margin:12px 0}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:1000;background:rgba(3,6,14,.6);backdrop-filter:blur(6px)}
.modal.open{display:flex}
.modal-card{width:min(560px,92vw);background:linear-gradient(180deg, rgba(15,20,36,.96), rgba(11,15,25,.96));border:1px solid var(--edge);border-radius:20px;padding:20px;box-shadow:0 24px 60px rgba(0,0,0,.7)}
.close{border:none;background:transparent;color:var(--muted);font-size:22px;cursor:pointer}
footer{border-top:1px solid var(--edge);padding:26px 0;color:var(--muted);font-size:14px;text-align:center}
</style>
</head>
<body>
<a class="sr-only" href="#content">Sari la conÈ›inut</a>

<!-- Entry WOW Popup -->
<div class="modal" id="entryModal" role="dialog" aria-modal="true" aria-labelledby="m-title">
  <div class="modal-card">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
      <h3 id="m-title" class="glow" style="margin:0">Bine ai venit la Rivo âœ¨</h3>
      <button class="close" id="m-close" aria-label="ÃŽnchide">Ã—</button>
    </div>
    <p class="muted">ActiveazÄƒ <strong>trial 14 zile</strong> sau primeÈ™te resurse gratuite despre Prompts & Workflows.</p>
    <form name="lead" method="POST" data-netlify="true" class="card" style="display:grid;gap:10px">
      <input type="hidden" name="form-name" value="lead"/>
      <label>Email <input type="email" name="email" required placeholder="nume@email.com"></label>
      <button class="btn primary" type="submit">Vreau acces</button>
    </form>
  </div>
</div>

<!-- Cart Drawer -->
<div class="drawer" id="cartDrawer" aria-hidden="true">
  <div class="overlay" id="cartOverlay"></div>
  <div class="panel" role="dialog" aria-labelledby="cartTitle">
    <header>
      <h3 id="cartTitle" style="margin:0">Cosul tÄƒu</h3>
      <button class="close" id="cartClose">Ã—</button>
    </header>
    <div class="body">
      <div id="cartItems" class="grid" style="gap:12px"></div>
      <div class="total">
        <strong>Total</strong>
        <strong id="cartTotal" class="money">â‚¬0</strong>
      </div>
      <div class="grid" style="margin-top:12px">
        <button class="btn primary" id="checkoutBtn">FinalizeazÄƒ (demo / Stripe Link)</button>
        <button class="btn" id="clearCart">GoleÈ™te cosul</button>
      </div>
      <p class="muted" style="margin-top:10px;font-size:13px">Stripe Payment Links suportÄƒ plata pe produs. Pentru coÈ™ consolidat, foloseÈ™te Stripe Checkout cu funcÈ›ie serverless.</p>
    </div>
  </div>
</div>

<header class="nav">
  <div class="container nav-inner">
    <a class="brand" href="#/">
      <span class="dot" aria-hidden="true"></span><span>Rivo</span>
    </a>
    <nav class="nav-links">
      <a href="#/catalog">Cursuri</a>
      <a href="#/how">Workflows</a>
      <a href="#/pricing">PreÈ›uri</a>
      <a href="#/faq">FAQ</a>
    </nav>
    <div class="kit">
      <button class="btn small" id="loginBtn">Log in</button>
      <button class="btn small cart-btn" id="openCart">ðŸ›’ Cos <span class="cart-badge" id="cartCount">0</span></button>
      <a class="btn primary small" href="#/dashboard">Dashboard</a>
    </div>
  </div>
</header>

<main class="container" id="content">
  <!-- HOME -->
  <section class="hero section" data-view="home">
    <span class="badge">Prompts â†’ AI Workflows â€¢ Skill-to-Earn</span>
    <h1 class="glow">AutomatizeazÄƒ-È›i creativitatea cu AI</h1>
    <p class="lead muted">TransformÄƒ prompt-urile Ã®n fluxuri de lucru inteligente. Micro-cursuri, progres, XP, certificate.</p>
    <div style="display:flex;gap:12px;justify-content:center;margin-top:10px">
      <a class="btn primary" href="#/catalog">Vezi cursurile</a>
      <a class="btn" href="#/how">Cum funcÈ›ioneazÄƒ</a>
    </div>
    <p class="muted" style="margin-top:8px">ApasÄƒ <span class="kbd">G</span><span class="kbd">G</span> pentru cÄƒutare globalÄƒ (demo).</p>

    <div class="section">
      <h2 style="text-align:center">Cursuri populare</h2>
      <div id="homeCatalog" class="grid three"></div>
    </div>
  </section>

  <!-- CATALOG -->
  <section class="section" data-view="catalog">
    <h2>Catalog</h2>
    <div class="grid three" id="catalogList"></div>
  </section>

  <!-- COURSE -->
  <section class="section" data-view="course" id="courseView">
    <div class="grid two">
      <div>
        <img id="cThumb" alt="thumb" style="border-radius:12px;border:1px solid #141a34;margin-bottom:10px"/>
        <h1 id="cTitle">Titlu curs</h1>
        <p class="muted" id="cMeta"></p>
        <p id="cSummary" class="muted"></p>
        <div class="grid" style="grid-template-columns:repeat(1,auto);gap:10px" id="buyActions"></div>
      </div>
      <div class="card">
        <h3>Curriculum & Progres</h3>
        <div id="curriculum"></div>
        <div class="progress" style="margin-top:10px"><div id="bar"></div></div>
        <div class="muted" id="xpLine" style="margin-top:6px">XP: 0</div>
      </div>
    </div>
  </section>

  <!-- HOW -->
  <section class="section" data-view="how">
    <h2>Cum funcÈ›ioneazÄƒ Rivo</h2>
    <div class="grid two">
      <article class="card"><h3>1) Prompt</h3><p class="muted">Descrii rezultatul dorit.</p></article>
      <article class="card"><h3>2) Workflow</h3><p class="muted">Rivo propune paÈ™ii, tu ajustezi no-code.</p></article>
      <article class="card"><h3>3) Rulare</h3><p class="muted">ExecuÈ›ie, log-uri, alerte.</p></article>
      <article class="card"><h3>4) ÃŽnvÄƒÈ›are</h3><p class="muted">Optimizare continuÄƒ din feedback.</p></article>
    </div>
  </section>

  <!-- PRICING -->
  <section class="section" data-view="pricing">
    <h2>Planuri</h2>
    <div class="grid three">
      <article class="card" style="text-align:center"><h3>Free</h3><p class="money">â‚¬0</p><p class="muted">LecÈ›ii demo</p></article>
      <article class="card" style="text-align:center;border-color:rgba(124,92,255,.45);box-shadow:0 0 0 1px rgba(124,92,255,.25),var(--shadow)"><h3>Pro</h3><p class="money">â‚¬29/lunÄƒ</p><p class="muted">Toate cursurile</p></article>
      <article class="card" style="text-align:center"><h3>Enterprise</h3><p class="money">Contact</p><p class="muted">SSO, SLA</p></article>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section" data-view="faq">
    <h2>FAQ</h2>
    <details class="card"><summary><strong>Ce primesc dupÄƒ platÄƒ?</strong></summary><p class="muted">Acces instant + progres + certificat.</p></details>
    <details class="card"><summary><strong>Pot descÄƒrca materialele?</strong></summary><p class="muted">PDF-uri da, video streaming.</p></details>
    <details class="card"><summary><strong>Certificatele sunt acreditate?</strong></summary><p class="muted">Certificate de completare (micro-badge).</p></details>

    <form name="contact" method="POST" data-netlify="true" class="card" style="margin-top:14px;display:grid;gap:10px;max-width:680px">
      <input type="hidden" name="form-name" value="contact"/>
      <h3>Ai Ã®ntrebÄƒri?</h3>
      <label>Nume <input name="name" required></label>
      <label>Email <input type="email" name="email" required></label>
      <label>Mesaj <textarea name="message" rows="4" required></textarea></label>
      <button class="btn primary" type="submit">Trimite</button>
    </form>
  </section>

  <!-- DASHBOARD -->
  <section class="section" data-view="dashboard">
    <h1>Bun venit, <span id="userName">Cursant</span> ðŸ‘‹</h1>
    <div class="grid two" id="myCourses"></div>
  </section>

  <!-- CART VIEW (route-based fallback) -->
  <section class="section" data-view="cart">
    <h2>Cos</h2>
    <div id="cartPage"></div>
  </section>
</main>

<footer class="container">
  <div style="display:flex;gap:12px;flex-wrap:wrap;justify-content:center">
    <a href="#">Termeni</a>â€¢<a href="#">ConfidenÈ›ialitate</a>â€¢<a href="#/faq">Ajutor</a>
  </div>
  <p style="margin:8px 0 0">Â© <span id="year"></span> Rivo â€” Skill-to-Earn</p>
</footer>

<!-- COURSES JSON (embedded) -->
<script type="application/json" id="courses">
[
  {
    "id":"ai-prompts-20",
    "title":"Pachet 20 Prompts â€“ Content, Image, Analysis",
    "level":"ÃŽncepÄƒtor","duration":"1.5h","price":15,
    "category":"AI Prompts",
    "payment_link":"REPLACE_WITH_STRIPE_PAYMENT_LINK_ai_prompts_20",
    "thumb":"https://images.unsplash.com/photo-1534759846116-57968a434a49?q=80&w=1200&auto=format&fit=crop",
    "summary":"20 prompts testate pentru copy, imagini È™i analizÄƒ.",
    "modules":[
      {"title":"Introducere","lessons":["Ce e un prompt bun","StructurÄƒ & ton","Evitarea halucinaÈ›iilor"]},
      {"title":"Content","lessons":["Outreach email","PostÄƒri social","Rezumat + TODO"]},
      {"title":"Image","lessons":["Stiluri & compoziÈ›ie","VariaÈ›ii & seed-uri"]},
      {"title":"Analysis","lessons":["Sentiment","Clasificare etichete","Topic mining"]}
    ]
  },
  {
    "id":"wf-templates-60",
    "title":"Workflow Templates â€“ 60 No-Code Automations",
    "level":"Intermediar","duration":"3h","price":59,
    "category":"Automations",
    "payment_link":"REPLACE_WITH_STRIPE_PAYMENT_LINK_wf_templates_60",
    "thumb":"https://images.unsplash.com/photo-1551281044-8d8d2aa1a24d?q=80&w=1200&auto=format&fit=crop",
    "summary":"60 È™abloane no-code pentru CRM, email, analytics, imagini.",
    "modules":[
      {"title":"Setup","lessons":["Chei API","Trigger & actions","Rate limiting"]},
      {"title":"Marketing","lessons":["Rescriere landing","Drip emails","Lead scoring AI"]}
    ]
  },
  {
    "id":"prompt-pro-100",
    "title":"Prompt Pack PRO â€“ 100 pentru echipe",
    "level":"Avansat","duration":"5h","price":39,
    "category":"AI Prompts",
    "payment_link":"REPLACE_WITH_STRIPE_PAYMENT_LINK_prompt_pro_100",
    "thumb":"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop",
    "summary":"ColecÈ›ie extinsÄƒ: content, code, vizual, date.",
    "modules":[
      {"title":"ArhitecturÄƒ","lessons":["Chain-of-thought","Self-critique","Function calling"]}
    ]
  }
]
</script>

<script>
/* ==== UTIL ==== */
const $=(s,c=document)=>c.querySelector(s), $$=(s,c=document)=>Array.from(c.querySelectorAll(s));
const COURSES = JSON.parse($('#courses').textContent);
const money = n => `â‚¬${(+n).toFixed(0)}`;

/* ==== AUTH (demo) ==== */
const Auth={
  user(){try{return JSON.parse(localStorage.getItem('rivo_user')||'null')}catch{return null}},
  login(email){const u={email,name:email.split('@')[0]}; localStorage.setItem('rivo_user',JSON.stringify(u)); return u;},
  logout(){localStorage.removeItem('rivo_user')}
};

/* ==== CART ==== */
const Cart={
  key:'rivo_cart',
  all(){try{return JSON.parse(localStorage.getItem(this.key)||'[]')}catch{return []}},
  save(items){localStorage.setItem(this.key,JSON.stringify(items)); updateCartBadge();},
  add(id){const items=this.all(); const i=items.find(x=>x.id===id); if(i){i.qty++} else {items.push({id,qty:1})} this.save(items)},
  remove(id){const items=this.all().filter(x=>x.id!==id); this.save(items)},
  setQty(id,qty){const items=this.all().map(x=>x.id===id?({...x,qty:Math.max(1,qty)}):x); this.save(items)},
  clear(){this.save([])},
  total(){return this.all().reduce((s,it)=>{const c=COURSES.find(x=>x.id===it.id); return s+ (c? c.price*it.qty:0)},0)}
};
function updateCartBadge(){ $('#cartCount').textContent = Cart.all().reduce((s,i)=>s+i.qty,0) }

/* ==== PURCHASES (demo) ==== */
const Purchases={
  key:'rivo_purchases',
  all(){try{return JSON.parse(localStorage.getItem(this.key)||'[]')}catch{return []}},
  save(a){localStorage.setItem(this.key,JSON.stringify(a))},
  add(id){const a=this.all(); if(!a.includes(id)){a.push(id); this.save(a)}},
  has(id){return this.all().includes(id)}
};

/* ==== PROGRESS / XP ==== */
const Progress={
  get(id){try{return JSON.parse(localStorage.getItem('rivo_prog_'+id)||'{}')}catch{return {}}},
  set(id,obj){localStorage.setItem('rivo_prog_'+id,JSON.stringify(obj))},
  mark(id,key){const p=this.get(id); if(!p[key]){ p[key]=true; this.set(id,p); XP.add(10); } return p;}
};
const XP={
  get(){return +localStorage.getItem('rivo_xp')||0},
  set(v){localStorage.setItem('rivo_xp',String(v))},
  add(n){this.set(this.get()+n)}
};

/* ==== ROUTER ==== */
const views=$$('[data-view]');
function show(view){ views.forEach(v=>v.classList.remove('is-visible','active')); const el=$(`[data-view="${view}"]`); if(el){ el.classList.add('active'); setTimeout(()=>el.classList.add('is-visible'),10); } }
function route(){
  const h=location.hash||'#/';
  const params=new URLSearchParams(h.split('?')[1]||'');
  if(h.startsWith('#/catalog')){ show('catalog'); renderCatalog(COURSES,$('#catalogList')); }
  else if(h.startsWith('#/course')){ show('course'); const id=params.get('id'); renderCourse(id); }
  else if(h.startsWith('#/how')){ show('how'); }
  else if(h.startsWith('#/pricing')){ show('pricing'); }
  else if(h.startsWith('#/faq')){ show('faq'); }
  else if(h.startsWith('#/dashboard')){ show('dashboard'); renderDashboard(); }
  else if(h.startsWith('#/cart')){ show('cart'); renderCartPage(); }
  else { show('home'); renderCatalog(COURSES.slice(0,3),$('#homeCatalog')); }
  // Stripe Payment Link redirect success
  const qs=new URLSearchParams(location.search);
  if(qs.get('success')==='1' && qs.get('course')){ Purchases.add(qs.get('course')); history.replaceState({},'',location.pathname+location.hash); }
}
window.addEventListener('hashchange',route);

/* ==== RENDERERS ==== */
function courseCard(c,cta=true){
  return `<article class="card">
    <img src="${c.thumb}" alt="${c.title}" style="border-radius:12px;border:1px solid #141a34;margin-bottom:10px;aspect-ratio:16/9;object-fit:cover"/>
    <h3 style="margin:6px 0">${c.title}</h3>
    <p class="muted">${c.summary}</p>
    <div style="display:flex;align-items:center;justify-content:space-between;margin-top:8px">
      <span class="money">${money(c.price)}</span>
      <div style="display:flex;gap:8px">
        <a class="btn" href="#/course?id=${c.id}">Detalii</a>
        ${cta? `<button class="btn primary" data-add="${c.id}">AdaugÄƒ Ã®n cos</button>`:''}
      </div>
    </div>
  </article>`;
}
function wireAddButtons(scope=document){ scope.querySelectorAll('[data-add]').forEach(b=> b.addEventListener('click',()=>{ Cart.add(b.dataset.add); openCart(); })); }
function renderCatalog(list,mount){ mount.innerHTML=list.map(c=>courseCard(c)).join(''); wireAddButtons(mount); }

function renderCourse(id){
  const c=COURSES.find(x=>x.id===id);
  if(!c){ $('#courseView').innerHTML='<p>Curs indisponibil.</p>'; return; }
  $('#cThumb').src=c.thumb; $('#cTitle').textContent=c.title; $('#cMeta').textContent=`${c.level} â€¢ ${c.duration} â€¢ ${c.category}`;
  $('#cSummary').textContent=c.summary;
  const owned=Purchases.has(c.id);
  $('#buyActions').innerHTML = `
    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn primary" data-add="${c.id}">${owned?'ÃŽncepe / ContinuÄƒ':'AdaugÄƒ Ã®n cos'} (${money(c.price)})</button>
      ${c.payment_link && !c.payment_link.startsWith('REPLACE_WITH_') ? `<a class="btn" href="${c.payment_link}" target="_blank" rel="noopener">Stripe Link</a>`:''}
      ${owned? `<button class="btn" id="genCert">Certificat</button>`:''}
    </div>
    <p class="muted" style="font-size:13px;margin:6px 0 0">Plata securizatÄƒ Stripe. Acces instant la conÈ›inut dupÄƒ achiziÈ›ie.</p>`;
  wireAddButtons($('#buyActions'));

  const prog=Progress.get(c.id);
  const total=c.modules.reduce((s,m)=>s+m.lessons.length,0);
  const done=Object.keys(prog).length; const pct=Math.min(100,Math.round(done/total*100))||0;
  $('#bar').style.width=pct+'%'; $('#xpLine').textContent = `XP: ${XP.get()} â€¢ Progres: ${pct}%`;

  $('#curriculum').innerHTML = c.modules.map((m,mi)=>`
    <details ${mi===0?'open':''}><summary><strong>${m.title}</strong></summary>
      <ol style="line-height:1.8;margin:8px 0 0 16px">
        ${m.lessons.map((l,li)=>{
          const key=`${mi}_${li}`, checked=!!prog[key], lock=owned?'':' (ðŸ”’)';
          return `<li style="display:flex;align-items:center;gap:8px;margin:6px 0">
              <input type="checkbox" ${checked?'checked':''} data-lesson="${key}" ${owned?'':'disabled'}>
              <span>${l}${lock}</span>
          </li>`;
        }).join('')}
      </ol>
    </details>`).join('');
  $('#curriculum').onchange=(e)=>{ const box=e.target.closest('[data-lesson]'); if(!box) return;
    const p=Progress.mark(c.id, box.getAttribute('data-lesson'));
    const done=Object.keys(p).length; const pct=Math.min(100,Math.round(done/total*100));
    $('#bar').style.width=pct+'%'; $('#xpLine').textContent = `XP: ${XP.get()} â€¢ Progres: ${pct}%`;
  };
  $('#genCert')?.addEventListener('click',()=> alert('Demo: certificat generat! (integrare PDF Ã®n funcÈ›ie serverless)'));
}

function renderDashboard(){
  const u=Auth.user(); if(!u){ const email=prompt('Email pentru logare:'); if(!email) return; Auth.login(email); }
  $('#userName').textContent=Auth.user()?.name || 'Cursant';
  const mine=COURSES.filter(c=> Purchases.has(c.id));
  const wrap=$('#myCourses');
  if(mine.length===0){ wrap.innerHTML='<p class="muted">ÃŽncÄƒ nu ai cursuri. ExploreazÄƒ <a href="#/catalog" style="text-decoration:underline">catalogul</a>.</p>'; return;}
  wrap.innerHTML=mine.map(c=>{
    const prog=Progress.get(c.id); const total=c.modules.reduce((s,m)=>s+m.lessons.length,0);
    const pct=Math.min(100,Math.round(Object.keys(prog).length/total*100))||0;
    return `<article class="card">
      <div style="display:flex;gap:12px;align-items:flex-start">
        <img src="${c.thumb}" alt="${c.title}" style="width:120px;height:80px;object-fit:cover;border-radius:10px;border:1px solid #141a34">
        <div style="flex:1">
          <h3 style="margin:4px 0 6px">${c.title}</h3>
          <div class="progress"><div style="width:${pct}%"></div></div>
          <div class="muted" style="margin-top:6px">Progres: ${pct}%</div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <a class="btn primary" href="#/course?id=${c.id}">ContinuÄƒ</a>
            ${pct===100? `<button class="btn" onclick="alert('Demo: certificat PDF.');">Certificat</button>`:''}
          </div>
        </div>
      </div>
    </article>`;
  }).join('');
}

/* ==== CART RENDER ==== */
function cartItemRow(it){
  const c=COURSES.find(x=>x.id===it.id); if(!c) return '';
  return `<div class="item">
    <img src="${c.thumb}" alt="${c.title}" style="width:72px;height:56px;object-fit:cover;border-radius:8px;border:1px solid #141a34">
    <div><strong>${c.title}</strong><div class="muted">${money(c.price)} â€¢ ${c.level}</div></div>
    <div class="qty">
      <button data-dec="${it.id}">âˆ’</button><span>${it.qty}</span><button data-inc="${it.id}">+</button>
      <button class="btn small" data-del="${it.id}" style="margin-left:6px">âœ•</button>
    </div>
  </div>`;
}
function wireCartControls(scope){
  scope.querySelectorAll('[data-inc]').forEach(b=> b.addEventListener('click',()=>{ const id=b.dataset.inc; const it=Cart.all().find(x=>x.id===id); Cart.setQty(id,(it?.qty||1)+1); renderCart(); }));
  scope.querySelectorAll('[data-dec]').forEach(b=> b.addEventListener('click',()=>{ const id=b.dataset.dec; const it=Cart.all().find(x=>x.id===id); Cart.setQty(id,Math.max(1,(it?.qty||1)-1)); renderCart(); }));
  scope.querySelectorAll('[data-del]').forEach(b=> b.addEventListener('click',()=>{ Cart.remove(b.dataset.del); renderCart(); }));
}
function renderCart(){
  const items=Cart.all(); const list=items.map(cartItemRow).join('') || '<p class="muted">Cosul este gol.</p>';
  $('#cartItems').innerHTML=list; $('#cartTotal').textContent=money(Cart.total()); wireCartControls($('#cartItems'));
}
function renderCartPage(){
  const items=Cart.all(); if(items.length===0){ $('#cartPage').innerHTML='<p class="muted">Cosul este gol. <a href="#/catalog" style="text-decoration:underline">Vezi cursuri</a>.</p>'; return; }
  $('#cartPage').innerHTML = `
    <div class="grid" style="gap:12px">${items.map(cartItemRow).join('')}</div>
    <hr class="line">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <strong>Total</strong><strong class="money">${money(Cart.total())}</strong>
    </div>
    <div class="grid" style="margin-top:12px">
      <button class="btn primary" id="checkoutBtnPg">FinalizeazÄƒ (demo / Stripe Link)</button>
      <button class="btn" id="clearCartPg">GoleÈ™te cosul</button>
    </div>`;
  wireCartControls($('#cartPage'));
  $('#clearCartPg').onclick=()=>{ Cart.clear(); renderCartPage(); };
  $('#checkoutBtnPg').onclick=checkoutFlow;
}

/* ==== CHECKOUT FLOW ==== */
function checkoutFlow(){
  const items=Cart.all();
  if(items.length===0) return alert('Cos gol.');
  // DacÄƒ ai Payment Links reale, le deschidem pe rÃ¢nd (simplu).
  const withLinks = items.filter(it=> {const c=COURSES.find(x=>x.id===it.id); return c && c.payment_link && !c.payment_link.startsWith('REPLACE_WITH_');});
  if(withLinks.length){
    alert('VeÈ›i fi redirecÈ›ionat cÄƒtre Stripe pentru fiecare produs din coÈ™.');
    const first = COURSES.find(x=>x.id===withLinks[0].id);
    window.open(first.payment_link,'_blank');
    // NOTE: pentru consolidare Ã®ntr-o singurÄƒ platÄƒ, foloseÈ™te Stripe Checkout + Netlify Functions.
  } else {
    // DEMO: marcÄƒm achiziÈ›ii local È™i golim coÈ™ul
    items.forEach(it=> Purchases.add(it.id));
    Cart.clear(); renderCart(); renderCartPage?.();
    alert('Demo: comandÄƒ finalizatÄƒ. Cursurile au fost activate Ã®n Dashboard.');
    location.hash = '#/dashboard';
  }
}

/* ==== UI WIRING ==== */
function openCart(){ $('#cartDrawer').classList.add('open'); renderCart(); }
function closeCart(){ $('#cartDrawer').classList.remove('open'); }
$('#openCart').onclick=openCart; $('#cartClose').onclick=closeCart; $('#cartOverlay').onclick=closeCart;
$('#clearCart').onclick=()=>{ Cart.clear(); renderCart(); };
$('#checkoutBtn').onclick=checkoutFlow;

/* ==== ENTRY POPUP ==== */
(function(){
  const modal=$('#entryModal'), close=$('#m-close'); const last=localStorage.getItem('rivo_modal_ts'); const WEEK=7*24*60*60*1000;
  if(!last || (Date.now()-Number(last))>WEEK) modal.classList.add('open');
  close.addEventListener('click',()=>{ modal.classList.remove('open'); localStorage.setItem('rivo_modal_ts', String(Date.now())); });
  modal.addEventListener('click',e=>{ if(e.target===modal) close.click(); });
})();

/* ==== HERO GG Search (demo) ==== */
let gCount=0,lastKey=0; window.addEventListener('keydown',e=>{ const t=Date.now(); if(t-lastKey>450)gCount=0; lastKey=t; if(e.key.toLowerCase()==='g'){gCount++; if(gCount===2){ alert('CÄƒutare globalÄƒ (demo) â€” tasteazÄƒ promptul tÄƒu.'); gCount=0; }}});

/* ==== SCROLL REVEAL ==== */
const sections=$$('.section'); const io=new IntersectionObserver(ents=>ents.forEach(en=>{if(en.isIntersecting)en.target.classList.add('is-visible')}),{threshold:.12}); sections.forEach(s=>io.observe(s));

/* ==== NAV ==== */
$('#loginBtn').onclick=()=>{ const email=prompt('Email:'); if(!email) return; Auth.login(email); route(); };
$('#year').textContent=new Date().getFullYear();

/* ==== INIT ==== */
function initHome(){ renderCatalog(COURSES.slice(0,3), $('#homeCatalog')); }
function boot(){ updateCartBadge(); initHome(); route(); }
document.addEventListener('DOMContentLoaded', boot);
</script>

<!-- Hidden Netlify anti-spam form shadow -->
<form name="lead" data-netlify="true" netlify-honeypot="bot-field" hidden>
  <input type="hidden" name="form-name" value="lead"/><input name="bot-field"/>
</form>
<form name="contact" data-netlify="true" netlify-honeypot="bot-field" hidden>
  <input type="hidden" name="form-name" value="contact"/><input name="bot-field"/>
</form>
</body>
</html>
