<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rivo — Prompts & Digital Goods</title>
  <meta name="description" content="Rivo — magazin digital cu prompts și resurse pentru AI. Gata pentru Netlify." />
  <meta name="theme-color" content="#0b1220" />
  <meta property="og:title" content="Rivo — Prompts & Digital Goods" />
  <meta property="og:description" content="Magazin digital pentru creatori: prompts, template-uri și kit-uri AI." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/chip-bg.webp" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

  <style>
    #tech-bg{position:fixed;inset:0;z-index:-2;background:#020617}
    .gradient-overlay{position:fixed;inset:0;background:
      radial-gradient(1200px 800px at 20% 10%,rgba(59,130,246,.18),transparent 60%),
      radial-gradient(1000px 700px at 80% 20%,rgba(16,185,129,.16),transparent 60%),
      linear-gradient(180deg,rgba(2,6,23,.95) 0%,rgba(2,6,23,.88) 40%,rgba(2,6,23,.98) 100%);
      z-index:-1}
    img{display:block;max-width:100%;height:auto}
    .swiper-pagination-bullet{background:#94a3b8;opacity:.6}
    .swiper-pagination-bullet-active{background:#3B82F6;opacity:1}
  </style>
</head>

<body class="bg-slate-950 text-slate-100 font-sans selection:bg-brand-400/30 selection:text-white" data-bg-url="assets/chip-bg.webp">
  <canvas id="tech-bg" aria-hidden="true"></canvas>
  <div class="gradient-overlay" aria-hidden="true"></div>

  <!-- Hero simplu cu o imagine vizibilă -->
  <section class="relative overflow-hidden py-20">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl font-extrabold">Test Poze</h1>
      <p class="mt-4 text-slate-300">Imaginea de mai jos trebuie să apară corect.</p>
      <div class="mt-8">
        <!-- Imagine din assets -->
        <img src="assets/chip-bg.webp" alt="Chip test" class="rounded-xl shadow-soft mx-auto">
      </div>
      <div class="mt-8">
        <!-- Imagine externă pentru test -->
        <img src="https://images.unsplash.com/photo-1607082349566-187342de44d0?auto=format&fit=crop&w=800" alt="Unsplash Test" class="rounded-xl shadow-soft mx-auto">
      </div>
    </div>
  </section>

  <script>
    // ==== Fundal: foto din data-bg-url + linii animate (cu fallback-uri) ====
    const canvas = document.getElementById('tech-bg');
    const ctx = canvas.getContext('2d', { alpha: true });
    let W, H, T = 0, imgReady = false;

    function fit(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; }
    addEventListener('resize', fit); fit();

    // 1) Încarcă imaginea de fundal din <body data-bg-url="..."> cu fallback-uri
    const bgAttr = (document.body.getAttribute('data-bg-url')||'').trim();
    const fallbacks = [
      bgAttr,
      bgAttr.replace(/\.webp$/i, '.jpg'),
      'assets/chip-bg.jpg',
      'assets/chip-bg.png',
      'https://images.unsplash.com/photo-1607082349566-187342de44d0?auto=format&fit=crop&w=1600&q=80'
    ].filter(Boolean);

    let bgIndex = 0; let BG = new Image();
    function tryLoad(){
      if(bgIndex >= fallbacks.length){ console.warn('[Rivo] Nu s-a putut încărca niciun fundal.'); return; }
      BG = new Image();
      BG.onload = () => { imgReady = true; console.info('[Rivo] Fundal încărcat:', fallbacks[bgIndex]); };
      BG.onerror = () => { console.warn('[Rivo] Eroare la fundal:', fallbacks[bgIndex]); bgIndex++; tryLoad(); };
      // adaugă cache-buster în dev ca să vezi imediat schimbarea
      BG.src = fallbacks[bgIndex] + (location.hostname === 'localhost' ? ('?v=' + Date.now()) : '');
    }
    tryLoad();

    // 2) Linii diagonale animate (tech vibe)
    const lineCanvas = document.createElement('canvas');
    const lineCtx = lineCanvas.getContext('2d');
    function drawLines(time){
      lineCanvas.width = W; lineCanvas.height = H;
      lineCtx.clearRect(0,0,W,H);

      const spacing = 80;            // densitate linii
      const dash = [14, 18];         // pattern întreruperi
      const speed = 60;              // viteză
      const offset = time * speed;

      lineCtx.save();
      lineCtx.lineWidth = 1.25;

      // ↘ strat albastru
      lineCtx.strokeStyle = 'rgba(56,189,248,0.55)';
      lineCtx.setLineDash(dash);
      lineCtx.globalAlpha = 0.28;
      for(let x=-W; x<W*2; x+=spacing){
        lineCtx.lineDashOffset = -offset + x*0.1;
        lineCtx.beginPath(); lineCtx.moveTo(x,0); lineCtx.lineTo(x-H,H); lineCtx.stroke();
      }
      // ↗ strat verde
      lineCtx.strokeStyle = 'rgba(16,185,129,0.45)';
      lineCtx.globalAlpha = 0.22;
      for(let x=-W; x<W*2; x+=spacing){
        lineCtx.lineDashOffset = offset*0.7 + x*0.08;
        lineCtx.beginPath(); lineCtx.moveTo(x,H); lineCtx.lineTo(x+H,0); lineCtx.stroke();
      }
      // highlight mov
      lineCtx.globalCompositeOperation = 'lighter';
      lineCtx.setLineDash([4,22]);
      lineCtx.strokeStyle = 'rgba(99,102,241,0.35)';
      lineCtx.globalAlpha = 0.35;
      for(let x=-W; x<W*2; x+=spacing*0.5){
        lineCtx.lineDashOffset = -offset*1.2;
        lineCtx.beginPath(); lineCtx.moveTo(x,H); lineCtx.lineTo(x+H,0); lineCtx.stroke();
      }
      lineCtx.restore();
    }

    // 3) Randare frame: imagine + glow + linii
    function draw(){
      T += 0.005;
      ctx.clearRect(0,0,W,H);

      if(imgReady){
        // acoperă ecranul (cover) + mic „pan” ca să prindă viață
        const cover = Math.max(W / BG.naturalWidth, H / BG.naturalHeight) * 1.06;
        const iw = BG.naturalWidth * cover;
        const ih = BG.naturalHeight * cover;
        const panX = Math.sin(T*0.6) * 18;
        const panY = Math.cos(T*0.5) * 14;
        const x = (W - iw)/2 + panX;
        const y = (H - ih)/2 + panY;
        ctx.globalAlpha = 0.65; // lasă conținutul să respire
        ctx.drawImage(BG, x, y, iw, ih);
        ctx.globalAlpha = 1;

        // glow subtil peste foto
        const grad = ctx.createRadialGradient(
          W*0.2 + Math.sin(T)*50, H*0.15 + Math.cos(T*0.8)*40, 100,
          W*0.8 + Math.cos(T*0.6)*60, H*0.25 + Math.sin(T*0.9)*50, Math.max(W,H)
        );
        grad.addColorStop(0, 'rgba(59,130,246,0.08)');
        grad.addColorStop(1, 'rgba(2,6,23,0)');
        ctx.fillStyle = grad; ctx.fillRect(0,0,W,H);
      }

      drawLines(performance.now()/1000);
      ctx.drawImage(lineCanvas, 0, 0);

      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
